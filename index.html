<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>üéØ Captivator Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; background: #fafbfc; margin: 0; padding: 0; }
        .container { max-width: 540px; margin: 30px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 12px #eee; padding: 32px 28px; }
        h1 { text-align: center; color: #1d3557; }
        label { display: block; margin-top: 18px; font-weight: bold; }
        input[type="text"], input[type="range"] { width: 100%; padding: 8px; margin-top: 6px; border-radius: 5px; border: 1px solid #ddd; }
        .slider-label { display: flex; justify-content: space-between; margin-top: 8px; }
        button, .btn { background: #457b9d; color: #fff; border: none; padding: 10px 18px; border-radius: 5px; margin-top: 18px; cursor: pointer; font-size: 1em; }
        button:disabled { background: #bfc9d1; cursor: not-allowed; }
        .section { margin-top: 30px; }
        .caption-list { margin-top: 16px; }
        .caption-item { background: #f1f8fc; border-radius: 7px; padding: 18px 16px; margin-bottom: 16px; position: relative; }
        .caption-actions { margin-top: 10px; }
        .accepted { border: 2px solid #38b000; background: #e5fbe5; }
        .user-feedback { margin-top: 10px; width: 100%; padding: 7px; border-radius: 5px; border: 1px solid #bbb; }
        .feedback-submit { margin-top: 8px; background: #f77f00; }
        .regenerating { color: #555; font-size: 0.95em; margin-top: 8px; }
        .insight-tip { margin-bottom: 8px; }
        .caption-text { margin-bottom: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Captivator Pro</h1>
        <p style="text-align:center;">Generate engaging, human-like captions with smart, actionable insights</p>
        
        <div class="section">
            <label for="main-theme">Main Theme:</label>
            <input type="text" id="main-theme" placeholder="e.g. Juicy steak, Wedding dress, Zippo lighter">

            <label for="user-paraphrase">Your Paraphrase (comma separated, optional):</label>
            <input type="text" id="user-paraphrase" placeholder="e.g. sizzling perfection, tender and flavorful">

            <label for="style-vibe">Style/Vibe (optional):</label>
            <input type="text" id="style-vibe" placeholder="e.g. Fun, Motivational">

            <button id="generate-btn">‚ú® Generate Captions</button>
        </div>

        <div class="section">
            <h3>‚öôÔ∏è Advanced Creativity Controls</h3>
            <div>
                <div class="slider-label">
                    <span>Creativity Level:</span>
                    <span id="creativity-value">60</span>
                </div>
                <input type="range" min="0" max="100" value="60" id="creativity-slider">
            </div>
            <div>
                <div class="slider-label">
                    <span>Descriptiveness:</span>
                    <span id="descriptiveness-value">75</span>
                </div>
                <input type="range" min="0" max="100" value="75" id="descriptiveness-slider">
            </div>
            <label for="fav-phrases">Your Favorite Phrases:</label>
            <input type="text" id="fav-phrases" placeholder="Comma separated">

            <label for="desc-words">Your Descriptive Words:</label>
            <input type="text" id="desc-words" placeholder="Comma separated">

            <button id="save-prefs-btn" class="btn">üíæ Save Preferences</button>
        </div>

        <div class="section" id="generating-section" style="display:none;">
            <p>Generating your content...</p>
        </div>

        <div class="section" id="insight-section" style="display:none;">
            <h3>Content Insight</h3>
            <div id="content-insight"></div>
        </div>

        <div class="section" id="captions-section" style="display:none;">
            <h3>Top 3 Caption Options</h3>
            <div class="caption-list" id="caption-list">
                <!-- Captions will be injected here -->
            </div>
        </div>
    </div>

    <script>
        // Synonym pool for enrichment (expand as needed!)
        const synonymPool = {
            "juicy": ["succulent", "mouthwatering", "luscious", "rich"],
            "tender": ["soft", "delicate", "melt-in-your-mouth"],
            "flavorful": ["savory", "zesty", "tasty", "full-flavored"],
            "delicious": ["scrumptious", "delectable", "yummy", "appetizing"],
            "amazing": ["incredible", "fantastic", "unforgettable", "remarkable"],
            "welldone": ["perfectly cooked", "expertly grilled", "beautifully done"],
            "fire-kissed flavor": ["smoky flavor", "charred perfection", "grilled aroma"],
            "flame-grilled favorite": ["barbecue classic", "grill master‚Äôs choice", "smokehouse star"],
            "sizzling perfection": ["hot off the grill", "crackling delight", "steaming goodness"],
            // Add more as your app grows!
        };

        function getSynonyms(phrase) {
            // For multi-word phrase, try to find synonyms for each word, else fallback
            let lower = phrase.toLowerCase().trim();
            if (synonymPool[lower]) return [phrase].concat(synonymPool[lower]);
            let words = lower.split(/\s+/);
            let syns = words.map(w => synonymPool[w] || [w]);
            // Flatten and join
            return [phrase].concat([].concat(...syns).filter(s => s !== phrase));
        }

        // Brainstorm/RAG-style templates
        const templates = [
            "There‚Äôs nothing quite like a {phrase} to turn an ordinary day into something unforgettable.",
            "Savoring every moment with this {phrase}-pure happiness on a plate!",
            "Craving that first bite of {phrase}? Me too! #FoodieDreams",
            "Every story needs a highlight-today, it‚Äôs this {phrase}.",
            "Who‚Äôs ready for a taste adventure? This {phrase} is calling your name! üòã",
            "A moment of joy: {phrase}. Let‚Äôs make memories together!",
            "Just when you think you‚Äôve tasted it all, {phrase} steals the show.",
            "Nothing brings people together like a {phrase}.",
            "Turn up the flavor with this {phrase}-it‚Äôs love at first bite!",
            "If happiness had a flavor, it would be {phrase}.",
            "Tonight‚Äôs star: {phrase}. Who‚Äôs hungry?",
            "Let‚Äôs celebrate the little things-like a {phrase} done right!"
        ];

        // Generate 3 brainstormed, synonym-enriched, human-like captions
        function generateBrainstormedCaptions(mainTheme, userParaphrases) {
            let paraphraseArr = userParaphrases
                ? userParaphrases.split(',').map(p => p.trim()).filter(Boolean)
                : [];
            // If user didn't supply, fallback to theme itself
            if (paraphraseArr.length === 0) paraphraseArr = [mainTheme];
            // Shuffle paraphrase array
            paraphraseArr = paraphraseArr.sort(() => Math.random() - 0.5);

            let usedTemplates = templates.slice();
            let captions = [];
            let usedPhrases = new Set();

            while (captions.length < 3 && paraphraseArr.length > 0 && usedTemplates.length > 0) {
                // Pick a paraphrase, get synonyms, pick one at random
                let phrase = paraphraseArr.shift();
                let syns = getSynonyms(phrase);
                let chosen = syns[Math.floor(Math.random() * syns.length)];
                // Avoid repeating the same phrase in the batch
                if (usedPhrases.has(chosen)) continue;
                usedPhrases.add(chosen);

                // Pick a template at random, remove to avoid repeats
                let tIdx = Math.floor(Math.random() * usedTemplates.length);
                let template = usedTemplates.splice(tIdx, 1)[0];

                // Compose the caption
                let caption = template.replace("{phrase}", chosen);
                captions.push(caption);
            }
            // If not enough, fill with mainTheme as phrase
            while (captions.length < 3 && usedTemplates.length > 0) {
                let tIdx = Math.floor(Math.random() * usedTemplates.length);
                let template = usedTemplates.splice(tIdx, 1)[0];
                let caption = template.replace("{phrase}", mainTheme);
                captions.push(caption);
            }
            return captions;
        }

        // Improved, emotionally engaging Content Insight
        function generateContentInsight(mainTheme) {
            const facts = [
                {
                    keywords: ["steak", "juicy steak"],
                    text: [
                        "A juicy steak isn‚Äôt just food-it‚Äôs an experience, a memory, and a reason to celebrate.",
                        "Did you know? The perfect steak is all about timing, temperature, and a touch of passion.",
                        "A juicy steak is more than a meal-it‚Äôs a feast for the senses and the soul."
                    ]
                },
                {
                    keywords: ["wedding dress", "bridal gown"],
                    text: [
                        "A wedding dress is more than fabric-it‚Äôs a symbol of love, hope, and new beginnings.",
                        "From classic elegance to modern flair, every wedding dress tells a unique love story."
                    ]
                },
                {
                    keywords: ["zippo lighter"],
                    text: [
                        "Zippo lighters have become an icon of style and reliability since 1933.",
                        "A Zippo lighter is more than a tool-it‚Äôs a symbol of timeless design and adventure."
                    ]
                },
                // ...add more as needed
            ];
            let theme = mainTheme.trim().toLowerCase();
            for (let entry of facts) {
                if (entry.keywords.some(kw => theme.includes(kw))) {
                    return entry.text[Math.floor(Math.random() * entry.text.length)];
                }
            }
            // Universal fallback: make any theme sound fascinating
            const templates = [
                `‚Äú${mainTheme}‚Äù isn‚Äôt just a word-it‚Äôs a feeling, a memory, and a spark of joy. Celebrate it!`,
                `There's something truly special about "${mainTheme}"-it brings stories, dreams, and creativity to life.`,
                `No matter where you are, "${mainTheme}" has the power to connect and inspire.`,
                `‚Äú${mainTheme}‚Äù is a source of inspiration and wonder for people everywhere.`
            ];
            return templates[Math.floor(Math.random() * templates.length)];
        }

        // DOM elements
        const generateBtn = document.getElementById('generate-btn');
        const generatingSection = document.getElementById('generating-section');
        const captionsSection = document.getElementById('captions-section');
        const captionList = document.getElementById('caption-list');
        const insightSection = document.getElementById('insight-section');
        const contentInsight = document.getElementById('content-insight');
        const creativitySlider = document.getElementById('creativity-slider');
        const creativityValue = document.getElementById('creativity-value');
        creativitySlider.oninput = () => creativityValue.textContent = creativitySlider.value;
        const descriptivenessSlider = document.getElementById('descriptiveness-slider');
        const descriptivenessValue = document.getElementById('descriptiveness-value');
        descriptivenessSlider.oninput = () => descriptivenessValue.textContent = descriptivenessSlider.value;

        // Generate captions handler
        generateBtn.onclick = function() {
            let mainTheme = document.getElementById('main-theme').value.trim();
            let userParaphrase = document.getElementById('user-paraphrase').value.trim();
            if (!mainTheme) {
                alert('Please enter the main theme!');
                return;
            }
            let styleVibe = document.getElementById('style-vibe').value.trim();
            let favPhrases = document.getElementById('fav-phrases').value.trim();
            let descWords = document.getElementById('desc-words').value.trim();

            generatingSection.style.display = 'block';
            captionsSection.style.display = 'none';
            insightSection.style.display = 'none';
            captionList.innerHTML = '';

            setTimeout(() => {
                generatingSection.style.display = 'none';
                let captions = generateBrainstormedCaptions(mainTheme, userParaphrase);
                renderCaptions(captions);
                contentInsight.innerHTML = generateContentInsight(mainTheme);
                insightSection.style.display = 'block';
            }, 900);
        };

        // Render captions with Accept/Regenerate buttons
        function renderCaptions(captions) {
            captionsSection.style.display = 'block';
            captionList.innerHTML = '';
            captions.forEach((caption, idx) => {
                let item = document.createElement('div');
                item.className = 'caption-item';
                item.innerHTML = `
                    <div class="caption-text" id="caption-text-${idx}">${caption}</div>
                    <div class="caption-actions" id="actions-${idx}">
                        <button class="accept-btn" data-idx="${idx}">Accept</button>
                        <button class="regenerate-btn" data-idx="${idx}">Regenerate</button>
                    </div>
                `;
                captionList.appendChild(item);

                // Accept button logic
                item.querySelector('.accept-btn').onclick = function() {
                    item.classList.add('accepted');
                    this.disabled = true;
                    item.querySelector('.regenerate-btn').disabled = true;
                };

                // Regenerate button logic
                item.querySelector('.regenerate-btn').onclick = function() {
                    if (item.querySelector('.user-feedback')) return;

                    let feedbackInput = document.createElement('input');
                    feedbackInput.type = 'text';
                    feedbackInput.placeholder = 'Suggest a new idea or feedback...';
                    feedbackInput.className = 'user-feedback';

                    let submitBtn = document.createElement('button');
                    submitBtn.textContent = 'Submit Feedback';
                    submitBtn.className = 'feedback-submit';

                    let status = document.createElement('div');
                    status.className = 'regenerating';

                    submitBtn.onclick = function() {
                        let userOpinion = feedbackInput.value.trim();
                        if (!userOpinion) {
                            alert('Please enter your feedback or idea!');
                            return;
                        }
                        status.textContent = 'Regenerating...';
                        submitBtn.disabled = true;
                        feedbackInput.disabled = true;

                        setTimeout(() => {
                            // For regeneration, use feedback as a new paraphrase
                            let newCaptions = generateBrainstormedCaptions(userOpinion, userOpinion);
                            item.querySelector('.caption-text').textContent = newCaptions[0];
                            status.textContent = 'Caption updated!';
                            setTimeout(() => {
                                feedbackInput.remove();
                                submitBtn.remove();
                                status.remove();
                            }, 1200);
                        }, 900);
                    };

                    item.appendChild(feedbackInput);
                    item.appendChild(submitBtn);
                    item.appendChild(status);
                };
            });
        }

        // Save preferences (optional, just a stub)
        document.getElementById('save-prefs-btn').onclick = function() {
            alert('Preferences saved!');
        };
    </script>
</body>
</html>
